## AdiÃ§Ã£o de Armazenamento a uma InstÃ¢ncia do Amazon EC2

As instÃ¢ncias do Amazon EC2 oferecem **quatro opÃ§Ãµes principais de armazenamento**:

1. **Armazenamento de InstÃ¢ncias**  
2. **Amazon Elastic Block Store (Amazon EBS)**  
3. **Amazon Elastic File System (Amazon EFS)**  
4. **Amazon FSx para Windows File Server**

---

## Armazenamento de InstÃ¢ncias

- **Natureza**: Armazenamento **temporÃ¡rio em nÃ­vel de bloco**, diretamente ligado ao hardware fÃ­sico do host.
- **LocalizaÃ§Ã£o**: Reside em discos (HDD ou SSD) fisicamente anexados ao servidor que hospeda a instÃ¢ncia.
- **Tipos de SSD**:
  - SSD Serial ATA
  - SSD Non-Volatile Memory Express (NVMe) â€” oferece melhor desempenho de E/S.
- **PersistÃªncia**:
  - Os dados sÃ£o **preservados durante reinicializaÃ§Ãµes**, mas **perdidos ao encerrar (terminate)** a instÃ¢ncia.
  - **InstÃ¢ncias com armazenamento de instÃ¢ncias nÃ£o podem ser interrompidas (stopped)** â€” apenas reiniciadas ou encerradas.
- **Uso ideal**: Dados temporÃ¡rios, como buffers, caches, logs transitÃ³rios.
- **Acesso exclusivo**: Apenas a instÃ¢ncia Ã  qual estÃ¡ anexado pode utilizÃ¡-lo.
- **LimitaÃ§Ã£o**: NÃ£o pode ser compartilhado entre instÃ¢ncias.

> âš ï¸ **Importante**: Nem todos os tipos de instÃ¢ncia suportam armazenamento de instÃ¢ncias. O tipo da instÃ¢ncia define o tamanho e o tipo de hardware disponÃ­vel.

---

## Amazon Elastic Block Store (Amazon EBS)

- **Natureza**: Armazenamento **persistente em nÃ­vel de bloco**, semelhante a um disco rÃ­gido externo.
- **PersistÃªncia**: Os dados **sobrevivem ao ciclo de vida da instÃ¢ncia** (podem ser parados e reiniciados sem perda).
- **LocalizaÃ§Ã£o**: Volumes residem em HDDs ou SSDs (SATA ou NVMe).
- **Conectividade**: Anexados via rede a instÃ¢ncias na **mesma Zona de Disponibilidade (AZ)**.
- **Criptografia**: Suportada nativamente.
- **Backup**: Feito por meio de **snapshots** armazenados no Amazon S3.
- **Uso comum**: Bancos de dados, volumes-raiz, aplicaÃ§Ãµes com baixa latÃªncia.

### Tipos de Volumes EBS

#### SSD (ideal para workloads transacionais â€“ alta IOPS, baixa latÃªncia)

| Tipo | DescriÃ§Ã£o |
|------|-----------|
| **gp2** (SSD de Uso Geral) | PadrÃ£o para a maioria dos casos: ambientes de dev/teste, aplicaÃ§Ãµes interativas, volumes de boot. |
| **io1** (SSD com IOPS Provisionadas) | Alta performance para workloads crÃ­ticos: bancos de dados, data warehouses. Permite provisionar IOPS independentemente da capacidade. |

#### HDD (ideal para workloads de streaming â€“ alto throughput, grandes arquivos)

| Tipo | DescriÃ§Ã£o |
|------|-----------|
| **st1** (HDD Otimizado para Throughput) | Alto throughput, acesso frequente. Ideal para big data, analytics, logs. |
| **sc1** (HDD Frio) | Menor custo por GB. Para dados acessados raramente (ex: arquivamento). |

### OtimizaÃ§Ã£o para EBS

- **InstÃ¢ncias otimizadas para EBS** possuem **conexÃ£o de rede dedicada** para volumes EBS.
- **BenefÃ­cios**:
  - Largura de banda dedicada (425 Mbps a 14.000 Mbps, dependendo do tipo).
  - Minimiza contenÃ§Ã£o de trÃ¡fego de rede.
  - Melhora consistÃªncia e desempenho (atÃ© ~10% acima da linha de base).
- **AtivaÃ§Ã£o**:
  - AutomÃ¡tica em instÃ¢ncias categorizadas como otimizadas.
  - Manual em outras (via atributo `ebs-optimized`).
- **AWS Nitro System**: InstÃ¢ncias baseadas em Nitro obtÃªm desempenho ainda maior com EBS.

---

## Armazenamento Compartilhado: Quando VÃ¡rias InstÃ¢ncias Precisam Acessar os Mesmos Dados

> âš ï¸ Volumes EBS **nÃ£o podem ser anexados simultaneamente a mÃºltiplas instÃ¢ncias**.  
> Amazon S3 Ã© **armazenamento de objetos**, nÃ£o permite atualizaÃ§Ãµes parciais de arquivos.

Para esses cenÃ¡rios, use:

### Amazon EFS (para instÃ¢ncias **Linux**)

- **Natureza**: Sistema de arquivos **compartilhado, totalmente gerenciado**, baseado em **NFSv4.x**.
- **Acesso simultÃ¢neo**: Suporta **mÃºltiplas instÃ¢ncias EC2** (mesmo de AZs diferentes).
- **Sem provisionamento**: Escala automaticamente de **gigabytes a petabytes**.
- **ConsistÃªncia forte** e **bloqueio de arquivos**.
- **Classes de Armazenamento**:

| Classe | Disponibilidade | Custo | Caso de Uso |
|--------|------------------|------|-------------|
| **Standard** | Multi-AZ (alta durabilidade) | Mais alto | Dados crÃ­ticos, ativos frequentemente |
| **One Zone** | Ãšnica AZ (sem redundÃ¢ncia) | ~47% mais barato | Dados nÃ£o crÃ­ticos ou reproduzÃ­veis (ex: blog, dev/test) |

- **Montagem**:
  - Cada AZ pode ter **um destino de montagem** (mount target).
  - InstÃ¢ncias usam o **nome DNS** do sistema de arquivos, que resolve para o IP do mount target **na mesma AZ** (recomendado para desempenho e custo).
  - Em sistemas **One Zone**, todas as instÃ¢ncias acessam o mesmo mount target (mesmo que de AZs distintas â†’ gera custo de inter-AZ).

#### Casos de Uso do Amazon EFS

- DiretÃ³rios iniciais (home directories)
- AplicaÃ§Ãµes empresariais distribuÃ­das
- Ambientes de desenvolvimento/teste
- Backups de banco de dados
- Sistemas de gerenciamento de conteÃºdo (CMS)
- Analytics de big data
- Fluxos de trabalho de mÃ­dia (ediÃ§Ã£o, renderizaÃ§Ã£o)

---

### Amazon FSx para Windows File Server (para instÃ¢ncias **Windows**)

- **Natureza**: Servidor de arquivos **Windows totalmente gerenciado**.
- **Base**: Microsoft Windows Server.
- **Protocolos e Recursos CompatÃ­veis**:
  - **NTFS** (sistema de arquivos nativo do Windows)
  - **SMB** (Server Message Block)
  - **DFS** (Distributed File System)
  - **IntegraÃ§Ã£o com Microsoft Active Directory**
- **Desempenho**: SSD com alto throughput, baixa latÃªncia e alta IOPS.
- **Gerenciamento**: Totalmente gerenciado pela AWS â€” sem necessidade de provisionar ou manter servidores.

#### Casos de Uso do Amazon FSx para Windows

- DiretÃ³rios iniciais para grandes equipes
- AplicaÃ§Ãµes **lift-and-shift** do Windows
- Fluxos de trabalho de mÃ­dia/entretenimento
- Analytics com uso intensivo de dados
- DistribuiÃ§Ã£o de conteÃºdo web (compartilhamento entre servidores)
- Ambientes de desenvolvimento de software (sem alterar fluxos de trabalho)

---

## Resumo Comparativo

| Recurso | Armazenamento de InstÃ¢ncia | Amazon EBS | Amazon EFS | Amazon FSx (Windows) |
|--------|----------------------------|-----------|-----------|-----------------------|
| **PersistÃªncia** | NÃ£o (perde ao encerrar) | Sim | Sim | Sim |
| **Compartilhamento** | NÃ£o | NÃ£o | Sim (Linux) | Sim (Windows) |
| **Protocolo** | Bloco local | Bloco | NFSv4 | SMB |
| **Escalabilidade** | Fixo (por tipo de instÃ¢ncia) | Provisionado | AutomÃ¡tica | Provisionado |
| **Multi-AZ** | NÃ£o | Sim (por volume) | Sim (Standard) / NÃ£o (One Zone) | Sim |
| **Caso de Uso TÃ­pico** | Cache, dados temporÃ¡rios | Bancos de dados, boot | AplicaÃ§Ãµes Linux distribuÃ­das | AplicaÃ§Ãµes Windows corporativas |

---

> âœ… **Dica Final**:  
> - Use **EBS** para volumes-raiz ou dados persistentes em **uma Ãºnica instÃ¢ncia**.  
> - Use **EFS** para **Linux** com necessidade de compartilhamento.  
> - Use **FSx** para **Windows** com compatibilidade nativa.  
> - Use **armazenamento de instÃ¢ncia** apenas para dados **efÃªmeros e de alto desempenho**.

---

ğŸ‘‰ğŸ» [Clique aqui para voltar ao Readme](https://github.com/DrikaDev/Estudando-AWS-Solutions-Architect-Associate/blob/main/README.md) ğŸ“’
