## ğŸ“¦ Armazenamento de ConteÃºdo com o Amazon S3

O Amazon S3 fornece diferentes *storage classes* alinhadas aos requisitos do cliente.  
Este documento descreve cada classe de armazenamento, seu uso recomendado e recursos adicionais do S3, como ciclo de vida, versionamento, CORS e consistÃªncia.

## ğŸ—‚ï¸ Storage Classes do Amazon S3

Todas as storage classes do S3 sÃ£o projetadas para oferecer:

- **ResiliÃªncia** de 99,999999999% (11 noves)
- **Disponibilidade** de 99,9%  
  - Exceto **S3 One Zone-IA**, com disponibilidade de 99,5%
- **SLA (Service Level Agreement - Acordo de NÃ­vel de ServiÃ§o)** : 99%
  > *SLA* Ã© um compromisso formal entre o provedor de serviÃ§os e o cliente que define os nÃ­veis mÃ­nimos de qualidade e disponibilidade que o serviÃ§o deve oferecer.
  > O *SLA* geralmente define:  
  > - **Disponibilidade garantida** (uptime)
  > - **Desempenho esperado**
  > - **Tempo de resposta**
  > - **Penalidades ou crÃ©ditos** caso o serviÃ§o nÃ£o atenda ao nÃ­vel prometido  
  > - **Responsabilidades do provedor**  
  > - **Responsabilidades do cliente**  

  > Exemplo: A AWS define para o Amazon S3 um **SLA de 99%**, o que significa que o serviÃ§o deve estar disponÃ­vel em **99% do tempo** ao longo de um mÃªs.  
  > Se esse nÃ­vel nÃ£o for cumprido, o cliente pode receber **crÃ©ditos de utilizaÃ§Ã£o** conforme as polÃ­ticas da AWS.  
  > Em resumo: O *SLA* existe para **garantir a qualidade mÃ­nima do serviÃ§o** e proteger o cliente caso as expectativas nÃ£o sejam atendidas.  

  > Como a gente sabe quando o SLA nÃ£o cumpriu o prometido?  
  > Existem duas formas principais de saber se o SLA nÃ£o foi cumprido: pela sua prÃ³pria monitoraÃ§Ã£o e pela confirmaÃ§Ã£o da AWS.  
  > Em resumo: VocÃª sabe que o SLA nÃ£o foi cumprido quando:  
  > âœ” O prÃ³prio serviÃ§o que vocÃª monitora ficou indisponÃ­vel mais que o permitido  
  > âœ” A AWS reconhece incidentes que afetaram seu serviÃ§o  
  > âœ” Suas mÃ©tricas mostram downtime maior que o SLA  
  > âœ” Ao abrir um ticket, a AWS confirma e concede crÃ©ditos  

- **LatÃªncia de milissegundos** para o primeiro byte  
- **Armazenamento baseado em objetos**  
- **Suporte a transiÃ§Ãµes de ciclo de vida**  

DiferenÃ§as importantes entre as classes estÃ£o relacionadas a:
- NÃºmero de Zonas de Disponibilidade (ZA)
- CobranÃ§as mÃ­nimas de capacidade
- CobranÃ§as mÃ­nimas de duraÃ§Ã£o
- Custos de recuperaÃ§Ã£o

<img width="696" height="305" alt="image" src="https://github.com/user-attachments/assets/bd2fbbda-105e-472d-9915-cfb3da1c5120" />

### 1. ğŸ”¹ Uso Geral â€“ S3 Standard

O **S3 Standard** oferece:

- Alta durabilidade e disponibilidade  
- Baixa latÃªncia  
- Alto throughput  
- Armazenamento replicado em **3 ou mais Zonas de Disponibilidade**

Ideal para:
- AplicaÃ§Ãµes na nuvem  
- Sites dinÃ¢micos  
- DistribuiÃ§Ã£o de conteÃºdo  
- AplicaÃ§Ãµes mÃ³veis ou de jogos  
- Big Data e Analytics  
- Workloads acessados com frequÃªncia

### 2. ğŸ¤– S3 Intelligent-Tiering

O **S3 Intelligent-Tiering** reduz custos automaticamente movendo objetos entre camadas de acesso com base na frequÃªncia de uso.

CaracterÃ­sticas:
- MovimentaÃ§Ã£o automÃ¡tica, sem impacto no desempenho  
- Baixa latÃªncia para todas as camadas  
- Excelente para workloads com padrÃ£o de acesso imprevisÃ­vel

Recomendado para:
- Data Lakes  
- Data Analytics  
- Novas aplicaÃ§Ãµes  
- ConteÃºdo gerado por usuÃ¡rios

### 3. ğŸ“‰ Acesso Infrequente (IA)

#### ğŸ”¸ S3 Standard-IA
Oferece os mesmos benefÃ­cios do S3 Standard, porÃ©m com custo menor para dados acessados esporadicamente.

- CobranÃ§a mÃ­nima: **30 dias**
- Custo de recuperaÃ§Ã£o maior que o S3 Standard
- Ideal para:
  - Arquivos antigos
  - Logs antigos
  - Backups esporÃ¡dicos

#### ğŸ”¸ S3 One Zone-IA
Armazena dados em **uma Ãºnica AZ**.

Ideal para:
- Backups secundÃ¡rios  
- Dados que podem ser recriados  
- Dados replicados entre regiÃµes

### 4. ğŸ§Š Arquivo â€“ Glacier

#### ğŸŸ¦ S3 Glacier Instant Retrieval
- BaixÃ­ssimo custo para dados raramente acessados  
- RecuperaÃ§Ã£o em **milissegundos**
- CobranÃ§a mÃ­nima: **90 dias**
- Exemplos:
  - Imagens mÃ©dicas  
  - Ativos de mÃ­dia  
  - ConteÃºdos arquivados que exigem acesso rÃ¡pido

###$ ğŸŸ¦ S3 Glacier Flexible Retrieval (antigo Glacier)
- Custo extremamente baixo  
- RecuperaÃ§Ã£o assÃ­ncrona  
- Ideal para:
  - Backup  
  - RecuperaÃ§Ã£o de desastres  
  - Dados arquivados que nÃ£o necessitam acesso imediato

#### ğŸŸ¦ S3 Glacier Deep Archive
- Storage class mais barata do S3  
- RetenÃ§Ã£o de **7 a 10 anos ou mais**  
- CobranÃ§a mÃ­nima: **180 dias**
- Ideal para requisitos regulatÃ³rios em:
  - SaÃºde  
  - FinanÃ§as  
  - Setor pÃºblico

### 5. ğŸ¢ S3 on Outposts

Oferece armazenamento de objetos **on-premises** usando AWS Outposts.
- Storage class: **OUTPOSTS**
- Armazenamento resiliente em mÃºltiplos dispositivos dentro do Outpost
- Ideal para:
  - Requisitos locais de residÃªncia de dados  
  - Baixa latÃªncia entre aplicaÃ§Ãµes on-premises e armazenamento  

## ğŸ”„ Regras de Ciclo de Vida (Lifecycle Policies)

<img width="700" height="258" alt="image" src="https://github.com/user-attachments/assets/66896a4c-4ce5-42fa-a378-5ee0ba8d383c" />

Uma configuraÃ§Ã£o de ciclo de vida define aÃ§Ãµes automÃ¡ticas para objetos:

### Tipos de aÃ§Ãµes

### 1. AÃ§Ãµes de TransiÃ§Ã£o
Determinam quando objetos sÃ£o movidos para outra storage class.

Exemplos:
- Mover dados para S3 Standard-IA apÃ³s **30 dias**
- Mover para Glacier apÃ³s **1 ano**

âš ï¸ HÃ¡ custo associado Ã s solicitaÃ§Ãµes de transiÃ§Ã£o.

### 2. AÃ§Ãµes de ExpiraÃ§Ã£o
Definem quando objetos serÃ£o excluÃ­dos permanentemente pelo S3.

AplicaÃ§Ãµes:
- ExclusÃ£o de logs antigos  
- RetenÃ§Ã£o regulatÃ³ria  
- Arquivamento automÃ¡tico de documentos

Regras podem ser aplicadas:
- Por **bucket inteiro**
- Por **prefixo**
- Por **marcaÃ§Ã£o (tags)**

## ğŸ•› Exemplos de Ciclo de Vida

<img width="707" height="320" alt="image" src="https://github.com/user-attachments/assets/eaee39f0-d2d9-4fc9-af51-7f121a277208" />

1. **Logs periÃ³dicos**  
   - Guardar por 7 a 30 dias  
   - Excluir automaticamente apÃ³s esse perÃ­odo  

2. **Dados de arquivamento**  
   - Migrar para Glacier/Deep Archive apÃ³s 90 dias  
   - Excluir apÃ³s anos

3. **Documentos com acesso temporÃ¡rio**  
   - Inicialmente em Standard  
   - Depois mover para IA  
   - Depois para Glacier  

## ğŸŒ€ Versionamento no S3

<img width="702" height="303" alt="image" src="https://github.com/user-attachments/assets/84bdc633-67b5-4b8a-b791-fc4eac530532" />

Estados de versionamento:

### âœ”ï¸ 1. Versionamento Ativado
- Cada novo upload cria um **novo ID de versÃ£o**
- ExclusÃµes criam um **delete marker**
- VersÃµes anteriores podem ser recuperadas

### âŒ 2. Versionamento Desativado (padrÃ£o)
- Upload substitui o objeto anterior  
- ExclusÃµes sÃ£o permanentes  

### â¸ï¸ 3. Versionamento Suspenso
- MantÃ©m versÃµes existentes  
- Novos objetos nÃ£o recebem versÃµes adicionais  

ğŸ“Œ ObservaÃ§Ã£o:  
â€œDesativadoâ€ nÃ£o pode ser reativado; apenas â€œsuspensoâ€.

## ğŸ“š Exemplos de Funcionamento

### SubstituiÃ§Ã£o de objetos
- Upload de *photo.gif* gera versÃ£o 121212  
- VersÃ£o antiga 111111 permanece no bucket

### ExclusÃ£o com versionamento
- Um **delete marker** Ã© criado  
- GET padrÃ£o retorna 404  
- GET com ID da versÃ£o retorna o objeto

### ExclusÃ£o permanente
- O proprietÃ¡rio pode excluir uma versÃ£o especÃ­fica  
- Isso nÃ£o cria delete marker

## ğŸŒ CORS (Cross-Origin Resource Sharing)

O CORS permite que aplicaÃ§Ãµes web em um domÃ­nio acessem objetos em outro domÃ­nio.

<img width="704" height="283" alt="image" src="https://github.com/user-attachments/assets/6395a94d-fc04-4477-819e-304dadad66d0" />

Uma configuraÃ§Ã£o CORS inclui:
- DomÃ­nios permitidos  
- MÃ©todos HTTP permitidos  
- CabeÃ§alhos permitidos  

Exemplo tÃ­pico:
- Permitir GET de todas as origens

Isso Ã© essencial para:
- Sites usando fontes ou scripts hospedados no S3  
- AplicaÃ§Ãµes SPA  
- Acesso entre domÃ­nios

## ğŸ“ ConsistÃªncia de Dados no Amazon S3

O Amazon S3 oferece:

## ğŸ”’ ConsistÃªncia forte para:
- **PUT** â†’ leitura imediata retorna a versÃ£o mais recente  
- **GET**  
- **LIST**

BenefÃ­cios:
- Reduz necessidade de cÃ³digos adicionais  
- Elimina sistemas como S3Guard  
- Facilita migraÃ§Ã£o de workloads on-premises

### âš ï¸ ExceÃ§Ã£o:
ConfiguraÃ§Ãµes de **bucket** possuem consistÃªncia eventual.  
Exemplo:
- Excluir bucket â†’ listagem pode mostrar o bucket por alguns instantes.

## âœ… Resumo Geral

O Amazon S3 oferece um ecossistema completo para armazenamento escalÃ¡vel, econÃ´mico e de alta durabilidade, incluindo:

- Diversas storage classes  
- Ciclo de vida automatizado  
- Versionamento  
- CORS  
- ConsistÃªncia forte  
- Armazenamento on-premises com Outposts  

---

ğŸ‘‰ğŸ» [Clique aqui para voltar ao Readme](https://github.com/DrikaDev/Estudando-AWS-Solutions-Architect-Associate/blob/main/README.md) ğŸ“’
