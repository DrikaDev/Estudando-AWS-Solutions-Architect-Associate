## Práticas recomendadas para criar soluções na AWS

Ao projetar uma solução, é essencial avaliar cuidadosamente as **vantagens e desvantagens** para selecionar a abordagem ideal.  
Por exemplo, em alguns cenários é possível abrir mão de **consistência**, **durabilidade** ou **espaço** em troca de **latência menor** e **melhor 
desempenho**.  
Em outros casos, você pode priorizar a **velocidade de comercialização** mesmo que isso resulte em um custo maior.

Essas decisões podem impactar diretamente o custo e a complexidade da arquitetura. Por isso, o design deve ser sempre baseado em **dados empíricos**.  
Alguns exemplos:

- Realizar **testes de carga** para validar ganhos reais de desempenho.  
- Executar **benchmarking** para identificar a opção mais econômica ao longo do tempo.

Ao avaliar melhorias de desempenho, considere também como suas escolhas afetarão:
- A experiência dos clientes  
- A eficiência do workload  
- A escalabilidade e a manutenção da solução

Nesta seção, você conhecerá:
- **Práticas recomendadas** para projetar arquiteturas na AWS  
- **Antipadrões** — abordagens inadequadas que devem ser evitadas  

## 1. Tratar Recursos como Descartáveis

Aproveite a natureza dinâmica da computação em nuvem.

**Boas práticas:**
- Automatize a implantação de novos recursos com configurações idênticas.
- Encerre recursos que não estão em uso.
- Teste atualizações em novos recursos e depois substitua os antigos pelos atualizados.

A ideia central é **tratar a infraestrutura como software**, não como hardware.  
Com hardware tradicional, você geralmente compra mais do que precisa para picos de uso — isso é caro, inflexível e difícil de atualizar.

Ao tratar recursos como descartáveis:
- A migração entre instâncias é simples.
- Você reage rapidamente a mudanças de capacidade.
- Facilita atualizações e gerenciamento de software.

## 2. Usar Componentes com Acoplamento Fraco

Projete arquiteturas com componentes independentes.

**Soluções que promovem desacoplamento:**
- **Balanceadores de carga**, como o Elastic Load Balancing (ELB).
- **Filas de mensagens**, como Amazon SQS.

Com acoplamento forte, quando um componente falha, todo o sistema pode falhar junto.  
Com acoplamento fraco, serviços intermediários lidam automaticamente com falhas e escalabilidade.

**Exemplo de boa prática:**
- Servidores web desacoplados de servidores de aplicação usando o ELB.

**Antipadrão:**
- Servidores web conectados diretamente e de forma rígida aos servidores de aplicação.

## 3. Criar Serviços, Não Servidores

Use a variedade de serviços gerenciados da AWS. Não limite tudo a EC2.

**Considere:**
- Contêineres ou soluções serverless quando apropriado.
- Filas de mensagens para comunicação entre aplicações.
- Armazenamento de ativos estáticos no Amazon S3.
- Serviços gerenciados para autenticação e gerenciamento de estado.

Soluções como AWS Lambda, Amazon SQS, DynamoDB, ELB, Amazon SES e Amazon Cognito podem substituir servidores inteiros com custo menor e mais eficiência.

## 4. Escolher a Solução de Banco de Dados Ideal

Combine o tipo de banco de dados ao workload — não o contrário.

**Perguntas importantes:**
- Quais são as necessidades de leitura e gravação?
- Qual o total de armazenamento necessário?
- Qual o tamanho típico dos objetos?
- Quais são os requisitos de durabilidade e latência?
- Quantos usuários simultâneos?
- Quais são as necessidades de consulta?
- Qual o nível necessário de integridade dos dados?

A AWS recomenda escolher o armazenamento com base no comportamento da aplicação, e não por limitações de hardware (como ocorre on-premises).

## 5. Evitar Pontos Únicos de Falha

Presuma que tudo pode falhar. Projete a arquitetura para suportar falhas.

**Exemplo típico:**
- Dois servidores de aplicação conectados a um único banco de dados → ponto único de falha.
- Solução: criar um banco de dados secundário (standby) e replicar os dados.
- Se o banco principal falhar, o secundário assume automaticamente.

Essa abordagem reforça também o conceito de recursos descartáveis.

## 6. Otimizar em Termos de Custo

Aproveite a flexibilidade da nuvem para atingir eficiência financeira.

**Pergunte-se:**
- Meus recursos têm o tamanho e tipo adequados?
- Quais métricas devo monitorar?
- Como desligar recursos não utilizados?
- Com que frequência o recurso será usado?
- Posso substituir servidores por serviços gerenciados?

Lembre-se: replicar na nuvem um data center rodando 24/7 pode ser muito caro.  
Use o modelo pay-as-you-go a seu favor.

## 7. Usar Cache

Minimize operações redundantes, reduza custos e melhore a performance.

O cache armazena dados temporariamente entre o usuário e o armazenamento principal.

**Exemplo com CloudFront + S3:**
1. A primeira solicitação verifica no CloudFront; se não encontrar, busca no S3.
2. CloudFront armazena o arquivo no edge.
3. Solicitações subsequentes vêm direto do edge — menor latência e menor custo.

## 8. Proteger Toda a Infraestrutura

Promova segurança em todas as camadas.

**Boas práticas:**
- Use serviços gerenciados.
- Registre acessos a recursos.
- Isole partes da infraestrutura.
- Criptografe dados em trânsito e em repouso.
- Aplique controle de acesso com menor privilégio.
- Use MFA.
- Automatize implantações para manter segurança consistente.

Exemplo: em EC2, grupos de segurança podem limitar portas, origem e destino do tráfego, evitando que problemas em uma instância se espalhem.

---

