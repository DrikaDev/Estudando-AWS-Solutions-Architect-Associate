## Sele√ß√£o de uma AMI para Iniciar uma Inst√¢ncia do EC2

## O que √© uma AMI?

<img width="509" height="255" alt="image" src="https://github.com/user-attachments/assets/1746e870-1c68-40cc-8c21-521512a6e84a" />

Uma Amazon Machine Image (AMI) fornece as informa√ß√µes necess√°rias para iniciar uma inst√¢ncia do EC2.  
Ao executar uma inst√¢ncia, voc√™ deve especificar uma AMI de origem. A AMI inclui:
- Um modelo para o volume raiz da inst√¢ncia  
- Permiss√µes de execu√ß√£o  
- Mapeamentos de dispositivos de bloco  

O volume-raiz geralmente cont√©m:
- Um sistema operacional completo  
- Aplica√ß√µes instaladas  
- Bibliotecas e utilit√°rios

O Amazon EC2 copia o modelo para o volume-raiz da nova inst√¢ncia e a inicializa.

As permiss√µes de execu√ß√£o controlam as contas AWS que podem usar a AMI e permitem torn√°-la p√∫blica.

Os mapeamentos de dispositivos de bloco especificam volumes adicionais que ser√£o anexados √† inst√¢ncia no momento da inicializa√ß√£o.

√â poss√≠vel iniciar v√°rias inst√¢ncias a partir de uma mesma AMI (repetibilidade) ou usar AMIs diferentes para workloads diferentes.

## Benef√≠cios das AMIs

<img width="549" height="229" alt="image" src="https://github.com/user-attachments/assets/d656c084-d284-44e3-8dc6-3c8f06d4fee1" />

### Repetibilidade
Uma AMI empacota toda a configura√ß√£o da inst√¢ncia, permitindo iniciar v√°rias c√≥pias id√™nticas.

### Reutiliza√ß√£o
Inst√¢ncias iniciadas da mesma AMI s√£o r√©plicas id√™nticas, facilitando cria√ß√£o de clusters e ambientes consistentes.

### Capacidade de Recupera√ß√£o
Se uma inst√¢ncia falhar, uma nova pode ser iniciada a partir da mesma AMI.  
Altera√ß√µes adicionais devem ser salvas criando uma nova AMI.

## Caracter√≠sticas a Considerar ao Escolher uma AMI

1. **Regi√£o**  
   AMIs s√£o espec√≠ficas por Regi√£o. Podem ser copiadas entre Regi√µes.

2. **Sistema Operacional**  
   Pode ser Windows ou distribui√ß√µes Linux (Amazon Linux, Ubuntu, RHEL, SUSE, Debian, etc.).

3. **Armazenamento do Dispositivo-Raiz**  
   - Compat√≠vel com Amazon EBS  
   - Compat√≠vel com Instance Store  
   Dados do EBS persistem; dados do Instance Store s√£o ef√™meros.

4. **Arquitetura**  
   - 32 bits ou 64 bits  
   - x86 ou ARM

5. **Tipo de Virtualiza√ß√£o**  
   - PV (Paravirtual)  
   - HVM (Hardware Virtual Machine) ‚Äì recomendado por melhor desempenho

## Origens das AMIs

- **Quick Starts (AWS)**  
  AMIs fornecidas pela AWS com Windows ou Linux.

- **Minhas AMIs**  
  Criadas pelo pr√≥prio usu√°rio a partir de uma inst√¢ncia EC2.

- **AWS Marketplace**  
  AMIs de fornecedores para solu√ß√µes espec√≠ficas.

- **AMIs da Comunidade**  
  Criadas por usu√°rios. N√£o s√£o controladas pela AWS; evite em produ√ß√£o.

## Diferen√ßas Entre AMIs EBS e Instance Store

- Inst√¢ncias com Instance Store demoram mais para inicializar (imagem recuperada do S3).  
- Volume raiz m√°ximo:
  - EBS ‚Üí at√© 16 TiB  
  - Instance Store ‚Üí at√© 10 GiB  
- Inst√¢ncias Instance Store n√£o podem ser interrompidas; apenas reiniciadas ou encerradas.  
- N√£o √© poss√≠vel alterar o tipo da inst√¢ncia Instance Store.  
- Custos:
  - EBS cobra armazenamento EBS  
  - Instance Store usa S3 (geralmente mais barato)  
- Use EBS quando precisar de persist√™ncia; Instance Store quando os dados forem tempor√°rios.

## Ciclo de Vida de uma Inst√¢ncia EC2

<img width="555" height="256" alt="image" src="https://github.com/user-attachments/assets/b504abe6-6131-43d8-a3d4-6c1de579bfe5" />

### Estados e Transi√ß√µes (v√°lido para certifica√ß√£o SAA)

### 1. Pendente (pending)
A inst√¢ncia est√° sendo provisionada e inicializada.

### 2. Em execu√ß√£o (running)
A inst√¢ncia est√° ativa e pronta para uso.

### 3. Reinicializando (rebooting)
- Mesma m√°quina f√≠sica  
- Mant√©m IP p√∫blico e DNS  
- Instance store permanece

### 4. Encerrando (shutting-down ‚Üí terminated)
- A inst√¢ncia √© destru√≠da e n√£o pode ser recuperada  
- Fica vis√≠vel por um tempo no console

## Estados Adicionais para Inst√¢ncias Compat√≠veis com EBS

### Interrompida (stopped)
- A inst√¢ncia √© desligada  
- N√£o gera custo de computa√ß√£o  
- Pode ser reiniciada (volta para pending)  
- Geralmente recebe novo IP p√∫blico

### Interrompendo (stopping)
Transi√ß√£o at√© o estado stopped.

### Hibernada (hibernated)
- Mant√©m RAM, IP privado e Elastic IP  
- Restaura rapidamente  
- N√£o gera custos de execu√ß√£o enquanto hibernada

## Cria√ß√£o de uma AMI

<img width="566" height="256" alt="image" src="https://github.com/user-attachments/assets/32037be1-dcb2-4897-b530-a59152f94653" />

1. Iniciar uma inst√¢ncia a partir de uma AMI existente.  
2. Modificar a inst√¢ncia (SO, apps, configs).  
3. Criar uma nova AMI a partir dessa inst√¢ncia.  
4. Copiar a nova AMI para outras Regi√µes (opcional).

### AMIs EBS-backed
- Cria√ß√£o simples  
- Registro autom√°tico

### AMIs Instance Store-backed
- Criar pacote manualmente  
- Fazer upload para S3  
- Registrar manualmente a AMI

## EC2 Image Builder

<img width="558" height="227" alt="image" src="https://github.com/user-attachments/assets/814c293f-2d37-4de5-a188-f19ddaff3e3d" />

O EC2 Image Builder facilita:
- Cria√ß√£o  
- Manuten√ß√£o  
- Valida√ß√£o  
- Compartilhamento  
- Implanta√ß√£o  

de AMIs Linux e Windows.

Recursos:
- Cria√ß√£o de imagens minimalistas  
- Redu√ß√£o de vulnerabilidades  
- Testes autom√°ticos  
- Controle de vers√£o  
- Suporte para gera√ß√£o de imagens on-premises

---

üëâüèª [Clique aqui para voltar ao Readme](https://github.com/DrikaDev/Estudando-AWS-Solutions-Architect-Associate/blob/main/README.md) üìí
